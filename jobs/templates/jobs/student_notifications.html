{% extends "base.html" %}
{% block title %}Notifications{% endblock %}

{% block content %}
<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3><i class="bi bi-bell me-2"></i> Notifications</h3>
    <form method="post" action="{% url 'jobs:student_notifications_mark_all_read' %}">
      {% csrf_token %}
      <button class="btn btn-sm btn-outline-primary">
        <i class="bi bi-check2-all me-1"></i> Mark all as read
      </button>
    </form>
  </div>

  <div class="card">
    <ul class="list-group list-group-flush">
      {% for n in notifications %}
        <li class="list-group-item d-flex justify-content-between align-items-start {% if not n.is_read %}fw-semibold{% endif %}">
          <div>
            {% if n.url %}
              <a href="{{ n.url }}">{{ n.message }}</a>
            {% else %}
              {{ n.message }}
            {% endif %}
            <div class="small text-muted">{{ n.created_at|date:"M d, Y H:i" }}</div>
          </div>
          {% if not n.is_read %}
            <form method="post" action="{% url 'jobs:student_notification_read' n.pk %}">
              {% csrf_token %}
              <button class="btn btn-sm btn-outline-success">Mark read</button>
            </form>
          {% else %}
            <span class="badge bg-secondary">Read</span>
          {% endif %}
        </li>
      {% empty %}
        <li class="list-group-item text-center text-muted py-5">
          <i class="bi bi-bell-slash fs-1 d-block mb-2"></i>
          No notifications yet.
        </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
